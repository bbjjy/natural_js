<article class="exap0100 view-code">
	<h1>데이터목록 조회 예제</h1>
	<div class="intro">
		<p class="smallContTit">검색박스와 그리드가 조합된 일반적인 데이터 목록 화면 입니다.</p>
		<p class="smallContTit">서버와 연계되지 않은 UI 쪽 코딩 예제 입니다. 때문에 검색 조건으로 입력한 데이터는 그리드에 적용되지 않습니다. 서버쪽으로 전달되는 파라미터만 확인 바랍니다.</p>
		<p class="smallContTit">서버에서는 브라우저에서 POST로 전달된 JSON 문자열 데이터를 변환하여 파라미터로 사용하면 됩니다.</p>
	</div>

	<div class="searchBox">
		<ul>
			<li class="inputs">
				<label>Name<input id="name" type="text" data-validate='[["required"], ["alphabet+integer"]]' /></label>
				<label>Gender<input id="gender" type="radio" /></label>
				<label>Eye Color<select id="eyeColor"><option>선택</option></select></label>
			</li>
			<li class="buttons">
				<a id="btnSearch" href="#">조회</a>
			</li>
		</ul>
	</div>

	<table id="grid" class="grid" style="width: 100%;">
		<thead>
			<tr>
				<th width="9%">Index</th>
				<th width="17%">Name</th>
				<th width="*">Email</th>
				<th width="11%">Gender</th>
				<th width="13%">Eye Color</th>
				<th width="7%">Age</th>
				<th width="13%">Company</th>
				<th width="12%">Active</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td id="index" align="center"></td>
				<td id="name"></td>
				<td id="email"></td>
				<td id="gender" align="center"></td>
				<td id="eyeColor" align="center"></td>
				<td id="age"></td>
				<td id="company"></td>
				<td id="isActive" align="center"></td>
			</tr>
		</tbody>
	</table>
</article>

<script type="text/javascript">
N(".exap0100").cont({
	genderCodes : [{
     	"key" : "male",
     	"val" : "male"
     },{
     	"key" : "female",
     	"val" : "female"
    }],
	eyeColorCodes : [{
     	"key" : "blue",
     	"val" : "blue"
     },{
     	"key" : "brown",
     	"val" : "brown"
     },{
     	"key" : "green",
     	"val" : "green"
	}],
    init : function(view, request) {
    	// 1. initialize buttons
    	N(".buttons a", view).button();

    	// 2. initialize N.select and bind data for search box inputs
    	// 2-1. create #gender select
		N(this.genderCodes).select(N("div.searchBox li.inputs #gender", view)).bind();
		// 2-2. create #eyeColor select
		N(this.eyeColorCodes).select(N("div.searchBox li.inputs #eyeColor", view)).bind();

    	// 3. initialize N.form and add new row data for search box
    	var form = N([]).form({
    		context : N("div.searchBox li.inputs", view),
    		revert : true
    	}).add();

    	N("table#grid tbody")
    	// 4. initialize N.grid and bind empty data for data list
    	var grid = N([]).grid({
       		context : N("#grid", view),
       		data : [],
       		height : 350,
       		resizable : true,
       		sortable : true,
       		hover : true,
       		filter : true
       	}).bind();

    	// 5. bind events
    	N("#btnSearch", view).click(function(e) {
            e.preventDefault();
            if(form.validate()) {
    			N(form.data()[0]).comm("html/apid/data/grid.json").submit(function(data, request) {
             		// Data bind by N.grid
             		grid.bind(data);
             		N(window).alert({
             			title : "서버로 전송되는 파라미터",
             			msg : "<pre>" + N.json.format(form.data()[0]).replace(/\\/g, "") + "</pre>"
             		}).show();
             	});
            }
        });
    }
});
</script>